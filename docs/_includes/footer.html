<footer style="height: 100vh" class="js-footer">
  <div
    style="z-index: -1"
    class="js-footer-content bg-dark-primary fixed right-0 bottom-0 left-0 flex h-[100vh] flex-col justify-center px-5 text-white sm:px-8 md:h-auto md:pt-40 md:pb-60 lg:pr-8 lg:pl-[168px] xl:pr-6 xl:pl-[230px]"
  >
    <div
      class="mx-auto flex max-w-[400px] flex-col md:max-w-[1184px] md:flex-row md:justify-between md:gap-8"
    >
      <div class="flex items-center justify-between md:flex-col md:items-start">
        <div class="text-[44px] font-medium md:order-2">Let's talk</div>
        <svg
          width="44"
          height="44"
          viewBox="0 0 44 44"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="link"
          onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
        >
          <circle
            cx="22"
            cy="21.4688"
            r="20"
            stroke="currentColor"
            stroke-width="2.17391"
          />
          <path
            d="M29.3472 13.9269L22 6.57973M22 6.57973L14.6528 13.9269M22 6.57973V36.0938"
            stroke="currentColor"
            stroke-width="2.17391"
          />
        </svg>
      </div>
      <div class="mt-15 flex flex-col gap-6 text-[20px] md:mt-0">
        <a href="/assets/cv.pdf" target="_blank" class="link">Get CV</a>
        <a
          href="https://www.linkedin.com/in/maria-petukhovskaya-6638051a9/"
          target="_blank"
          class="link"
          >LinkedIn</a
        >
        <a href="mailto:petukhouskaya.design@gmail.com" class="link"
          >petukhouskaya.design@gmail.com</a
        >
        <a href="https://t.me/mariapeven" target="_blank" class="link"
          >Telegram @mariapeven</a
        >
      </div>
      <div class="mt-21 text-right text-[28px] font-medium md:mt-0">
        <a href="./paperpile.html" class="js-random-case link"
          >See random case</a
        >
      </div>
    </div>
  </div>
</footer>
<script>
  const cases = ["./paperpile.html", "./fugo.html", "./sofia.html"];
  const currentIndex = parseInt(localStorage.getItem("caseIndex")) || 0;
  const randomCase = document.querySelector(".js-random-case");
  randomCase.href = cases[currentIndex];
  randomCase.addEventListener("click", () => {
    const nextIndex = (currentIndex + 1) % cases.length;
    localStorage.setItem("caseIndex", nextIndex);
  });

  const footer = document.querySelector(".js-footer");
  const footerContent = document.querySelector(".js-footer-content");
  footer.style.height = `${footerContent.clientHeight}px`;

  window.addEventListener("resize", () => {
    footer.style.height = `${footerContent.clientHeight}px`;
  });

  const previousSibling = footer.previousElementSibling;
  previousSibling.style.zIndex = Math.max(previousSibling.style.zIndex, 1);

  window.addEventListener("scroll", (e) => {
    const footerRect = footer.getBoundingClientRect();
    const isFooterOnScreen =
      footerRect.top < window.innerHeight && footerRect.bottom >= 0;
    if (isFooterOnScreen) {
      footerContent.style.zIndex = 0;
    } else {
      footerContent.style.zIndex = -1;
    }

    const isMobile = window.innerWidth < 1024;
    if (isMobile) {
      return;
    }
    const mainRect = previousSibling.getBoundingClientRect();
    const isOnScreen =
      mainRect.top < window.innerHeight && mainRect.bottom >= 0;
    const isHalfOnScreen =
      mainRect.top < window.innerHeight / 2 &&
      mainRect.bottom >= window.innerHeight / 2;

    if (!isOnScreen) {
      return;
    }

    if (mainRect.bottom < window.innerHeight + 100) {
      document.body.classList.add("bg-dark-primary");
    } else {
      document.body.classList.remove("bg-dark-primary");
    }

    const bottom = Math.min(mainRect.bottom, window.innerHeight);
    const visibleHeight = Math.max(0, bottom);
    previousSibling.style.borderRadius =
      Math.min(64, -visibleHeight / 10 + 64) + "px";
    const margin = Math.max(0, 40 - visibleHeight / 20);
    previousSibling.style.marginRight = margin + "px";
    previousSibling.style.marginLeft = margin + "px";
  });
</script>
